<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ØªØ§Ø¨Ø¹ Ø¥Ù†ØªØ§Ø¬ÙŠØ© Ø§Ù„ÙØ±ÙŠÙ‚ - Ø§Ù„ØªØ§Ø±Ø¬Øª</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --accent-color: #3498db;
            --success-color: #27ae60;
            --danger-color: #c0392b;
            --light-bg: #f4f7f6;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--light-bg);
            margin: 0;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        h1 {
            text-align: center;
            color: var(--primary-color);
            margin-bottom: 30px;
            border-bottom: 2px solid var(--accent-color);
            padding-bottom: 10px;
            display: inline-block;
        }

        /* Form Styling */
        .input-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
            background: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
        }

        .form-control {
            display: flex;
            flex-direction: column;
        }

        label {
            margin-bottom: 5px;
            font-weight: bold;
            font-size: 0.9em;
        }

        input, select, textarea {
            padding: 10px;
            border: 1px solid #bdc3c7;
            border-radius: 5px;
            font-size: 1em;
        }

        button {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1em;
            transition: background 0.3s;
            margin-top: 10px;
            width: 100%;
        }

        button:hover {
            background-color: #2980b9;
        }

        /* Table Styling */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            padding: 12px 15px;
            text-align: right;
            border-bottom: 1px solid #ddd;
        }

        th {
            background-color: var(--primary-color);
            color: white;
        }

        tr:hover {
            background-color: #f1f1f1;
        }

        /* Status Badges */
        .badge {
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.85em;
            color: white;
            font-weight: bold;
        }
        .bg-success { background-color: var(--success-color); }
        .bg-danger { background-color: var(--danger-color); }

        /* Progress Bar */
        .progress-container {
            background-color: #e0e0e0;
            border-radius: 10px;
            height: 10px;
            width: 100%;
            margin-top: 5px;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s ease-in-out;
        }

        .note-text {
            font-style: italic;
            color: #7f8c8d;
            font-size: 0.9em;
        }
        
        .summary-box {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            font-weight: bold;
            color: var(--primary-color);
        }

        .delete-btn {
            background-color: var(--danger-color);
            padding: 5px 10px;
            font-size: 0.8em;
            width: auto;
            margin: 0;
        }
    </style>
</head>
<body>

<div class="container">
    <div style="text-align: center;">
        <h1>ğŸ“Š Ù…ØªØ§Ø¨Ø¹ ØªØ§Ø±Ø¬Øª Ø§Ù„ÙØ±ÙŠÙ‚</h1>
    </div>

    <div class="input-group">
        <div class="form-control">
            <label>Ø§Ù„ØªØ§Ø±ÙŠØ®</label>
            <input type="date" id="dateInput">
        </div>
        <div class="form-control">
            <label>Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù</label>
            <input type="text" id="nameInput" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø§Ø³Ù…">
        </div>
        <div class="form-control">
            <label>Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„ (Call Time)</label>
            <input type="number" id="hoursInput" placeholder="Ù…Ø«Ù„Ø§Ù‹: 4 Ø£Ùˆ 8" min="1" max="12">
        </div>
        <div class="form-control">
            <label>Ø¹Ø¯Ø¯ Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø§Øª Ø§Ù„Ù…Ø­Ù‚Ù‚Ø©</label>
            <input type="number" id="callsInput" placeholder="Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„ÙØ¹Ù„ÙŠ">
        </div>
        <div class="form-control" style="grid-column: 1 / -1;">
            <label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø¥Ø°Ù†ØŒ ØªØ¯Ø±ÙŠØ¨ØŒ Ø¹Ù…Ù„ Ø¥Ø¯Ø§Ø±ÙŠ...)</label>
            <input type="text" id="notesInput" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© Ù‡Ù†Ø§...">
        </div>
    </div>

    <button onclick="addRecord()">Ø¥Ø¶Ø§ÙØ© Ø³Ø¬Ù„ +</button>

    <hr>

    <div class="summary-box">
        <span>Ø³Ø¬Ù„ Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ</span>
        <span id="totalRecords">Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ø¬Ù„Ø§Øª: 0</span>
    </div>

    <table id="recordsTable">
        <thead>
            <tr>
                <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                <th>Ø§Ù„Ø§Ø³Ù…</th>
                <th>Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„</th>
                <th>Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ (17/Ø³)</th>
                <th>Ø§Ù„Ù…Ø­Ù‚Ù‚</th>
                <th>Ø§Ù„Ù†Ø³Ø¨Ø© %</th>
                <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                <th>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>
                <th>Ø­Ø°Ù</th>
            </tr>
        </thead>
        <tbody>
            </tbody>
    </table>
</div>

<script>
    // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØªØ§Ø±ÙŠØ® Ù„Ù„ÙŠÙˆÙ… ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
    document.getElementById('dateInput').valueAsDate = new Date();

    // Ø§Ù„ØªØ§Ø±Ø¬Øª ÙÙŠ Ø§Ù„Ø³Ø§Ø¹Ø©
    const TARGET_PER_HOUR = 17;

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
    document.addEventListener('DOMContentLoaded', loadData);

    function addRecord() {
        const date = document.getElementById('dateInput').value;
        const name = document.getElementById('nameInput').value;
        const hours = parseFloat(document.getElementById('hoursInput').value);
        const calls = parseInt(document.getElementById('callsInput').value);
        const notes = document.getElementById('notesInput').value;

        if (!date || !name || !hours || isNaN(calls)) {
            alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©');
            return;
        }

        // Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ø­Ø³Ø§Ø¨ÙŠØ©
        const requiredCalls = hours * TARGET_PER_HOUR;
        const achievementPercent = (calls / requiredCalls) * 100;
        const isAchieved = calls >= requiredCalls;
        const diff = calls - requiredCalls; // Ø§Ù„ÙØ§Ø±Ù‚ (Ø¨Ø§Ù„Ø³Ø§Ù„Ø¨ Ø£Ùˆ Ø§Ù„Ù…ÙˆØ¬Ø¨)

        const record = {
            id: Date.now(),
            date,
            name,
            hours,
            requiredCalls,
            calls,
            achievementPercent: achievementPercent.toFixed(1),
            isAchieved,
            diff,
            notes
        };

        saveRecord(record);
        renderRow(record);
        clearInputs();
    }

    function renderRow(record) {
        const table = document.getElementById('recordsTable').getElementsByTagName('tbody')[0];
        const newRow = table.insertRow();

        // ØªØ­Ø¯ÙŠØ¯ Ù„ÙˆÙ† Ø§Ù„Ø­Ø§Ù„Ø© ÙˆØ´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
        const statusClass = record.isAchieved ? 'bg-success' : 'bg-danger';
        const statusText = record.isAchieved ? 'ØªÙ… Ø§Ù„ØªØ­Ù‚ÙŠÙ‚' : 'Ù„Ù… ÙŠØªØ­Ù‚Ù‚';
        const diffText = record.diff > 0 ? `+${record.diff}` : `${record.diff}`;
        
        // Ù„ÙˆÙ† Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø³Ø¨Ø©
        let progressColor = '#e74c3c'; // Ø£Ø­Ù…Ø±
        if (record.achievementPercent >= 100) progressColor = '#27ae60'; // Ø£Ø®Ø¶Ø±
        else if (record.achievementPercent >= 80) progressColor = '#f39c12'; // Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ

        // Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ø¹Ø±Ø¶ 100% Ù„Ù„Ø´Ø±ÙŠØ·
        const widthPercent = Math.min(record.achievementPercent, 100);

        newRow.innerHTML = `
            <td>${record.date}</td>
            <td><strong>${record.name}</strong></td>
            <td>${record.hours} Ø³Ø§Ø¹Ø§Øª</td>
            <td>${record.requiredCalls}</td>
            <td>
                ${record.calls} <small style="color:${record.diff >= 0 ? 'green' : 'red'}">(${diffText})</small>
            </td>
            <td>
                ${record.achievementPercent}%
                <div class="progress-container">
                    <div class="progress-bar" style="width: ${widthPercent}%; background-color: ${progressColor};"></div>
                </div>
            </td>
            <td><span class="badge ${statusClass}">${statusText}</span></td>
            <td class="note-text">${record.notes}</td>
            <td><button class="delete-btn" onclick="deleteRecord(${record.id}, this)">X</button></td>
        `;

        updateCount();
    }

    function saveRecord(record) {
        let records = JSON.parse(localStorage.getItem('teamProductivity')) || [];
        records.push(record);
        localStorage.setItem('teamProductivity', JSON.stringify(records));
    }

    function loadData() {
        let records = JSON.parse(localStorage.getItem('teamProductivity')) || [];
        records.forEach(renderRow);
        updateCount();
    }

    function deleteRecord(id, btn) {
        if(confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø³Ø¬Ù„ØŸ')) {
            let records = JSON.parse(localStorage.getItem('teamProductivity')) || [];
            records = records.filter(r => r.id !== id);
            localStorage.setItem('teamProductivity', JSON.stringify(records));
            
            // Ø­Ø°Ù Ø§Ù„ØµÙ Ù…Ù† Ø§Ù„Ø¬Ø¯ÙˆÙ„
            const row = btn.parentNode.parentNode;
            row.parentNode.removeChild(row);
            updateCount();
        }
    }

    function updateCount() {
        const count = document.getElementById('recordsTable').getElementsByTagName('tbody')[0].rows.length;
        document.getElementById('totalRecords').innerText = `Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ø¬Ù„Ø§Øª: ${count}`;
    }

    function clearInputs() {
        document.getElementById('nameInput').value = '';
        document.getElementById('hoursInput').value = '';
        document.getElementById('callsInput').value = '';
        document.getElementById('notesInput').value = '';
    }
</script>

</body>
</html>
